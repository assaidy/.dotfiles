# See https://wiki.hyprland.org/Configuring/Keywords/
$terminal = footclient
$browser = zen-browser
$app_menu = fuzzel
$panel = waybar -c ~/.config/waybar/config-hyprland.json
$screenshot = hyprshot -o ~/Pictures/Screenshots -m
$brightnessLimit = light -N 10%
$brightnessUp = light -A 10%
$brightnessDown = light -U 10%

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = fcitx5 -D
exec-once = hypridle
exec-once = $brightnessLimit
exec-once = foot --server
exec-once = $panel
exec-once = nm-applet
exec-once = blueman-applet
exec-once = swaync
exec-once = hyprsunset -t 5000
exec-once = swww-daemon
exec-once = ~/.dotfiles/scripts/wallpaper_switcher.sh ~/Pictures/walls/gruvbox
exec-once = ~/.config/hypr/scripts/workspace_windows.sh --daemon

# See https://wiki.hyprland.org/Configuring/Environment-variables/
cursor {
    no_hardware_cursors = true
}

env = GDK_SCALE, 1
env = XCURSOR_THEME, Bibata-Modern-Ice
env = XCURSOR_SIZE, 24
env = HYPRCURSOR_THEME, Bibata-Modern-Ice
env = HYPRCURSOR_SIZE, 24
env = XDG_CURRENT_DESKTOP, Hyprland
env = XDG_SESSION_DESKTOP, Hyprland
env = XDG_SESSION_TYPE, wayland

# nvidia
env = LIBVA_DRIVER_NAME, nvidia
env = GBM_BACKEND, nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME, nvidia
env = WLR_NO_HARDWARE_CURSORS, 1
# env = NVD_BACKEND, direct                # (for VA-API acceleration)
# env = SDL_VIDEODRIVER, wayland           # (for SDL2 apps)
# env = __NV_PRIME_RENDER_OFFLOAD, 1       # (for hybrid graphics)
# env = __VK_LAYER_NV_optimus, NVIDIA_only # (for Vulkan apps)
# env = WLR_DRM_NO_ATOMIC, 1               # (if needed for stability)
# env = XWAYLAND_NO_GLAMOR, 1              # (if using gamescope for gaming)
# env = __GL_MaxFramesAllowed, 1           # (to prevent frame limiter issues)
# env = WLR_RENDERER_ALLOW_SOFTWARE, 1     # (for software rendering fallback)
# env = ELECTRON_OZONE_PLATFORM_HINT, auto # (for native Wayland in Electron apps).

# see https://wiki.hyprland.org/configuring/keywords/
bind = SUPER, q, killactive
bind = SUPERSHIFT, q, exit, 
bind = SUPER, return, exec, $terminal
bind = SUPER, m, exec, $terminal -e btop
bind = SUPER, b, exec, $browser
bind = SUPER, f, fullscreen, 1
bind = SUPERSHIFT, f, fullscreen, 0
bind = SUPER, y, togglefloating,
bind = SUPER, space, exec, $app_menu
bind = SUPER, escape, exec, ~/.config/fuzzel/scripts/power.sh
bind = SUPER, e, exec, ~/.config/fuzzel/scripts/emojis.sh
bind = SUPER, s, exec, wl-paste | swappy -f -
bind = SUPER, c, exec, hyprpicker --autocopy
bind = SUPERSHIFT, w, exec, killall waybar; $panel

# volume
bind = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+
bind = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# brightness
bind = , XF86MonBrightnessUp, exec, $brightnessUp
bindle = , XF86MonBrightnessDown, exec, $brightnessDown

# screenshot
bind = SUPER, p, exec, $screenshot window
bind = SUPERSHIFT, p, exec, $screenshot region
bind = SUPERCTRL, p, exec, $screenshot output

# # Layout & Navigation (dwindle)
# bind = SUPER, j, movefocus, d
# bind = SUPER, k, movefocus, u
# bind = SUPER, h, movefocus, l
# bind = SUPER, l, movefocus, r

# Layout & Navigation (master)
bind = SUPERSHIFT, return, layoutmsg, swapwithmaster
bind = SUPER, j, layoutmsg, cyclenext
bind = SUPER, k, layoutmsg, cycleprev
bind = SUPER, h, movefocus, l
bind = SUPER, l, movefocus, r

bind = SUPERSHIFT, h, movewindow, l
bind = SUPERSHIFT, l, movewindow, r
bind = SUPERSHIFT, k, movewindow, u
bind = SUPERSHIFT, j, movewindow, d

bind = SUPERCTRL, h, resizeactive, -40 0
bind = SUPERCTRL, l, resizeactive, 40 0
bind = SUPERCTRL, k, resizeactive, 0 -40
bind = SUPERCTRL, j, resizeactive, 0 40

bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

bind = SUPERSHIFT, 1, movetoworkspacesilent, 1
bind = SUPERSHIFT, 2, movetoworkspacesilent, 2
bind = SUPERSHIFT, 3, movetoworkspacesilent, 3
bind = SUPERSHIFT, 4, movetoworkspacesilent, 4
bind = SUPERSHIFT, 5, movetoworkspacesilent, 5
bind = SUPERSHIFT, 6, movetoworkspacesilent, 6
bind = SUPERSHIFT, 7, movetoworkspacesilent, 7
bind = SUPERSHIFT, 8, movetoworkspacesilent, 8
bind = SUPERSHIFT, 9, movetoworkspacesilent, 9
bind = SUPERSHIFT, 0, movetoworkspacesilent, 10

bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

gesture = 3, horizontal, workspace

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
windowrule = match:class ^(blueman-manager)$, float true
windowrule = match:class ^(xdg-desktop-portal-gtk)$, float true
windowrule = match:class ^(org.pulseaudio.pavucontrol)$, float true

# windowrule = match:focus false, border_size 0
windowrule = match:focus false, no_shadow on

# Ref https://wiki.hyprland.org/Configuring/Workspace-Rules/
# "Smart gaps" / "No gaps when only"
# uncomment all if you wish to use that.
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
# windowrule = rounding 0, floating:0, onworkspace:w[tv1]
# windowrule = bordersize 0, floating:0, onworkspace:f[1]
# windowrule = rounding 0, floating:0, onworkspace:f[1]

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor = , preferred, auto, 1

# https://wiki.hyprland.org/configuring/variables/#input
input {
    kb_layout=us,ara
    kb_variant=
    kb_model=
    kb_options=grp:alt_shift_toggle
    kb_rules=

    repeat_rate=20
    repeat_delay=240
    
    sensitivity=0.3 # for mouse cursor

    touchpad {
        scroll_factor = 0.8
        disable_while_typing=1
        natural_scroll=1
        clickfinger_behavior=1
        middle_button_emulation=0
        tap-to-click=1
    }
}

# https://wiki.hyprland.org/configuring/variables/#gestures
gestures {
    workspace_swipe_min_speed_to_force = 5
} 

# example per-device config
# see https://wiki.hyprland.org/configuring/keywords/#per-device-input-configs for more
# device {
#     name = epic-mouse-v1
#     sensitivity = -0.5
# }

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

# See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
master {
    new_on_top = true
    new_status = master
    orientation = left
    mfact = 0.6
    # inherit_fullscreen = true
}

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 5
    gaps_out = 5

    border_size = 2
    resize_on_border = false

    col.active_border = rgba(B8BB26ee) # gruvbox
    # col.active_border = rgba(00AFFFee) # black/onedark

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false

    layout = master
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 5

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = true
        range = 10
        render_power = 3
        color = rgba(1a1a1aee)
    }

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = false
        size = 4
        passes = 3

        vibrancy = 0.1696
        new_optimizations = on
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
# animations {
#     enabled = true
#     first_launch_animation = true
#
#     # Default curves, see https://wiki.hypr.land/Configuring/Animations/#curves
#     #        NAME,           X0,   Y0,   X1,   Y1
#     bezier = easeOutQuint,   0.23, 1,    0.32, 1
#     bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
#     bezier = linear,         0,    0,    1,    1
#     bezier = almostLinear,   0.5,  0.5,  0.75, 1
#     bezier = quick,          0.15, 0,    0.1,  1
#
#     # Default animations, see https://wiki.hypr.land/Configuring/Animations/
#     #           NAME,          ONOFF, SPEED, CURVE,        [STYLE]
#     animation = global,        1,     10,    default
#     animation = border,        1,     5.39,  easeOutQuint
#     animation = windows,       1,     4.79,  easeOutQuint
#     animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87%
#     animation = windowsOut,    1,     1.49,  linear,       popin 87%
#     animation = fadeIn,        1,     1.73,  almostLinear
#     animation = fadeOut,       1,     1.46,  almostLinear
#     animation = fade,          1,     3.03,  quick
#     animation = layers,        1,     3.81,  easeOutQuint
#     animation = layersIn,      1,     4,     easeOutQuint, fade
#     animation = layersOut,     1,     1.5,   linear,       fade
#     animation = fadeLayersIn,  1,     1.79,  almostLinear
#     animation = fadeLayersOut, 1,     1.39,  almostLinear
#     animation = workspaces,    1,     1.94,  almostLinear, fade
#     animation = workspacesIn,  1,     1.21,  almostLinear, fade
#     animation = workspacesOut, 1,     1.94,  almostLinear, fade
#     animation = zoomFactor,    1,     7,     quick
# }

animations {
  enabled = true

  bezier = my_bezier, 0.05, 0.9, 0.1, 1.05

  animation = windows, 1, 5, my_bezier
  animation = windowsIn, 1, 5, my_bezier, slide
  animation = windowsOut, 1, 5, my_bezier, popin
  animation = border, 1, 10, default
  animation = borderangle, 1, 8, default
  animation = fade, 1, 5, default
  animation = workspaces, 1, 5, my_bezier, slidefade
}

# https://wiki.hyprland.org/configuring/variables/#misc
misc {
    force_default_wallpaper = false
    disable_hyprland_logo = true
    enable_anr_dialog = false
    # Options: 0 (stay fullscreen), 1 (drop fullscreen), 2 (drop only for new window creation)
    on_focus_under_fullscreen = 1
    exit_window_retains_fullscreen = true
}
